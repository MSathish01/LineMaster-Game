<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#1a1a2e">
    <title>LineMaster - Online Multiplayer</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app">
        <!-- Home Screen -->
        <div class="screen" id="homeScreen">
            <div class="home-box">
                <h1>üéÆ LineMaster</h1>
                <p class="tagline">Align 3 to Win!</p>
                
                <div class="user-info" id="userInfo">
                    <button class="login-btn" id="loginBtn">üîë Sign in with Google</button>
                </div>
                
                <div class="menu-buttons">
                    <button class="menu-btn local" id="localBtn">
                        <span class="icon">üë•</span>
                        <span class="label">Local Game</span>
                        <span class="desc">Play on same device</span>
                    </button>
                    <button class="menu-btn online" id="onlineBtn">
                        <span class="icon">üåê</span>
                        <span class="label">Play Online</span>
                        <span class="desc">Invite a friend</span>
                    </button>
                    <button class="menu-btn robot" id="robotBtn">
                        <span class="icon">ü§ñ</span>
                        <span class="label">vs Robot</span>
                        <span class="desc">Challenge AI</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Local Setup Screen -->
        <div class="screen hidden" id="localSetup">
            <div class="setup-box">
                <button class="back-btn" id="localBack">‚Üê Back</button>
                <h2>Local Game</h2>
                <div class="name-field">
                    <label>Player 1 Name</label>
                    <input type="text" id="p1Input" value="Player 1" maxlength="12">
                </div>
                <div class="name-field">
                    <label>Player 2 Name</label>
                    <input type="text" id="p2Input" value="Player 2" maxlength="12">
                </div>
                <button class="start-btn" id="startLocal">Start Game</button>
            </div>
        </div>

        <!-- Online Setup Screen -->
        <div class="screen hidden" id="onlineSetup">
            <div class="setup-box">
                <button class="back-btn" id="onlineBack">‚Üê Back</button>
                <h2>Play Online</h2>
                
                <div class="name-field">
                    <label>Your Name</label>
                    <input type="text" id="onlineName" value="Player" maxlength="12">
                </div>
                
                <div class="online-options">
                    <button class="option-btn quick-join" id="quickJoin">
                        <span class="icon">‚ö°</span>
                        <span>Quick Join</span>
                    </button>
                    <button class="option-btn create" id="createRoom">
                        <span class="icon">‚ûï</span>
                        <span>Create Room</span>
                    </button>
                    <div class="divider">OR JOIN WITH CODE</div>
                    <div class="join-section">
                        <input type="text" id="roomCodeInput" placeholder="Enter Code" maxlength="6">
                        <button class="option-btn join" id="joinRoom">Join</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Waiting Room -->
        <div class="screen hidden" id="waitingRoom">
            <div class="setup-box waiting">
                <h2>Waiting for Friend</h2>
                <div class="room-code-display">
                    <span>Room Code</span>
                    <div class="code" id="roomCodeDisplay">------</div>
                    <button class="copy-btn" id="copyCode">üìã Copy</button>
                </div>
                <div class="share-section">
                    <button class="share-btn" id="shareLink">üîó Share Invite Link</button>
                </div>
                <div class="waiting-animation">
                    <div class="dot"></div>
                    <div class="dot"></div>
                    <div class="dot"></div>
                </div>
                <p class="waiting-text">Share the code with your friend</p>
                <button class="cancel-btn" id="cancelWait">Cancel</button>
            </div>
        </div>

        <!-- Game Screen -->
        <div class="screen hidden" id="gameScreen">
            <div class="player-top" id="p1Panel">
                <div class="p-coin cyan"></div>
                <div class="p-info">
                    <span class="p-name" id="p1Name">Player 1</span>
                    <span class="p-status" id="p1Status">3 coins</span>
                </div>
                <span class="turn-badge" id="p1Turn">YOUR TURN</span>
            </div>

            <div class="game-area">
                <div class="online-indicator hidden" id="onlineIndicator">
                    <span class="live-dot"></span> Online
                </div>
                <div class="phase-text" id="phaseText">Place your coins</div>
                <div class="board-wrap">
                    <svg class="board-lines" viewBox="0 0 300 300">
                        <line x1="50" y1="50" x2="250" y2="50"/>
                        <line x1="50" y1="150" x2="250" y2="150"/>
                        <line x1="50" y1="250" x2="250" y2="250"/>
                        <line x1="50" y1="50" x2="50" y2="250"/>
                        <line x1="150" y1="50" x2="150" y2="250"/>
                        <line x1="250" y1="50" x2="250" y2="250"/>
                        <line x1="50" y1="50" x2="250" y2="250"/>
                        <line x1="250" y1="50" x2="50" y2="250"/>
                    </svg>
                    <div class="board" id="board">
                        <div class="node" data-pos="0"></div>
                        <div class="node" data-pos="1"></div>
                        <div class="node" data-pos="2"></div>
                        <div class="node" data-pos="3"></div>
                        <div class="node" data-pos="4"></div>
                        <div class="node" data-pos="5"></div>
                        <div class="node" data-pos="6"></div>
                        <div class="node" data-pos="7"></div>
                        <div class="node" data-pos="8"></div>
                    </div>
                </div>
            </div>

            <div class="player-bottom" id="p2Panel">
                <div class="p-coin purple"></div>
                <div class="p-info">
                    <span class="p-name" id="p2Name">Player 2</span>
                    <span class="p-status" id="p2Status">3 coins</span>
                </div>
                <span class="turn-badge" id="p2Turn">YOUR TURN</span>
            </div>

            <div class="btn-row">
                <button class="game-btn" id="undoBtn" disabled>‚Ü© Undo</button>
                <button class="game-btn" id="menuBtn">‚ò∞ Menu</button>
            </div>
        </div>

        <!-- Win Modal -->
        <div class="modal" id="winModal">
            <div class="modal-content win-modal">
                <div class="confetti"></div>
                <div class="trophy">üèÜ</div>
                <h2 id="winText">Player Wins!</h2>
                <div class="modal-btns">
                    <button class="modal-btn primary" id="againBtn">Play Again</button>
                    <button class="modal-btn" id="newBtn">Main Menu</button>
                </div>
            </div>
        </div>

        <!-- Toast Notification -->
        <div class="toast hidden" id="toast"></div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
    <script src="game.js"></script>
</body>
</html>
